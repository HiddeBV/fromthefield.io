{% comment %}
  Contact Form Component
  
  Integrated with Formspree for form submission
  Includes client-side validation and accessibility features
{% endcomment %}

<form 
  id="contact-form" 
  class="contact-form"
  action="{{ site.data.site-config.contact.formspreeEndpoint }}"
  method="POST"
  novalidate
>
  <!-- Name Field -->
  <div class="form-group">
    <label for="contact-name" class="form-label">
      Name <span class="required" aria-label="required">*</span>
    </label>
    <input 
      type="text" 
      id="contact-name" 
      name="name"
      class="form-input"
      required
      aria-required="true"
      aria-describedby="name-error"
      placeholder="Your full name"
    >
    <span id="name-error" class="form-error" role="alert"></span>
  </div>

  <!-- Email Field -->
  <div class="form-group">
    <label for="contact-email" class="form-label">
      Email <span class="required" aria-label="required">*</span>
    </label>
    <input 
      type="email" 
      id="contact-email" 
      name="email"
      class="form-input"
      required
      aria-required="true"
      aria-describedby="email-error"
      placeholder="your.email@example.com"
    >
    <span id="email-error" class="form-error" role="alert"></span>
  </div>

  <!-- Subject/Topic Field -->
  <div class="form-group">
    <label for="contact-subject" class="form-label">
      Subject <span class="required" aria-label="required">*</span>
    </label>
    <select 
      id="contact-subject" 
      name="subject"
      class="form-select"
      required
      aria-required="true"
      aria-describedby="subject-error"
    >
      <option value="">Select a topic...</option>
      <option value="Guest Inquiry">Guest Inquiry</option>
      <option value="Feedback">Feedback</option>
      <option value="Technical Question">Technical Question</option>
      <option value="Sponsorship">Sponsorship</option>
      <option value="Other">Other</option>
    </select>
    <span id="subject-error" class="form-error" role="alert"></span>
  </div>

  <!-- Message Field -->
  <div class="form-group">
    <label for="contact-message" class="form-label">
      Message <span class="required" aria-label="required">*</span>
    </label>
    <textarea 
      id="contact-message" 
      name="message"
      class="form-textarea"
      rows="6"
      required
      aria-required="true"
      aria-describedby="message-error"
      placeholder="Tell us more about your inquiry..."
    ></textarea>
    <span id="message-error" class="form-error" role="alert"></span>
    <span class="form-hint">Minimum 20 characters</span>
  </div>

  <!-- Honeypot for spam protection -->
  <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">
  
  <!-- Formspree configuration -->
  <input type="hidden" name="_subject" value="New contact form submission from From The Field">
  <input type="hidden" name="_next" value="{{ site.url }}/contact.html?success=true">

  <!-- Form Status Messages -->
  <div id="form-status" class="form-status" role="status" aria-live="polite"></div>

  <!-- Submit Button -->
  <div class="form-actions">
    <button 
      type="submit" 
      class="btn btn-primary btn-submit"
      id="submit-btn"
    >
      <span class="btn-text">Send Message</span>
      <span class="btn-loading" aria-hidden="true">
        <svg class="spinner" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <circle class="spinner-circle" cx="12" cy="12" r="10" stroke-width="4" fill="none"></circle>
        </svg>
        Sending...
      </span>
    </button>
    <button 
      type="reset" 
      class="btn btn-secondary"
      id="reset-btn"
    >
      Clear Form
    </button>
  </div>
</form>
